<!-- Chat Application Scripts -->
{% load static %}

<!-- 1. Configuration & Namespace (Inject Server Data) -->
<script src="{% static 'core/js/chat/namespace.js' %}"></script>
<script>
    // Inject Django Template Variables into the global Config
    if (window.Harvey && window.Harvey.Config) {
        Harvey.Config.csrfToken = "{{ csrf_token }}";
        Harvey.Config.username = "{{ user.username|escapejs }}";
        Harvey.Config.urls.chatWs = window.location.protocol === 'https:' ? 'wss' : 'ws';
    } else {
        console.error("Harvey Namespace not loaded!");
    }
</script>

<!-- 2. Modules -->
<script src="{% static 'core/js/chat/utils.js' %}"></script>
<script src="{% static 'core/js/chat/ui.js' %}"></script>
<script src="{% static 'core/js/chat/sidebar.js' %}"></script>
<script src="{% static 'core/js/chat/data.js' %}"></script>
<script src="{% static 'core/js/chat/socket.js' %}"></script>
<script src="{% static 'core/js/chat/upload.js' %}"></script>
<script src="{% static 'core/js/chat/main.js' %}"></script>